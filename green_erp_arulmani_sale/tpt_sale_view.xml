<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
     
        <record id="tpt_view_order_form" model="ir.ui.view">
            <field name="name">tpt.sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="before" >
                		<field name="blanket_id" on_change="onchange_blanket_id(blanket_id)" domain="[('blank_order_line','!=',False), ('state','=','approve')]" options="{'create': false, 'create_edit': false}" required = "1" />
                		<field name="blanket_line_id" domain="[('blanket_order_id','=',blanket_id)]" options="{'create': false, 'create_edit': false}" on_change="onchange_blanketorderline_id(blanket_line_id)" required="1" context="{'search_blanket_line':1,'blanket_id':blanket_id}"/>
                		</xpath><xpath expr="//field[@name='partner_id']" position="after" >
                		<field name="invoice_address" placeholder="Street..."/>
                		<field name="street2"/>
                		<field name="street3"/>
                		<field name="city" placeholder="City"/>
                		<field name="country_id" placeholder="Country" options="{'create': false, 'create_edit': false}"/>
                		<field name="state_id" placeholder="State" options="{'create': false, 'create_edit': false}"/>
                		<field name="zip" placeholder="ZIP"/> 
                		<field name="document_type"/>
                		
                		<field name="payment_term_id"  options="{'create': false, 'create_edit': false}"/>
                		<field name="incoterms_id" options="{'create': false, 'create_edit': false}" />
                		<field name="excise_duty_id" options="{'create': false, 'create_edit': false}"/>
	        	</xpath>
				<xpath expr="//field[@name='date_order']"  position="replace">
					<field name="date_order" string = "SO Date" on_change = "onchange_so_date(date_order, blanket_id)"/>
                	<field name="po_date" on_change="onchange_po_date(po_date)" />
                	<field name="po_number" />
                	<!-- 
                	<field name="expected_date" />
                	 -->
                	<field name="quotaion_no"/>
                	<field name="distribution_channel" options="{'create': false, 'create_edit': false}" />
                	<field name="sale_tax_id" options="{'create': false, 'create_edit': false}"/>
                	<field name="document_status"/>
                	 <field name="reason" />
                	 <field name="flag_t" invisible="1" />
                	 <field name="flag_p" invisible="1" />
                	 <field name="tpt_currency_id" invisible="1" />
				</xpath>
				<xpath expr="//field[@name='client_order_ref']"  position="replace">
					<field name="client_order_ref" invisible="1" />
				</xpath>
				<xpath expr="//button[@name='cancel']"  position="replace">
					<button name="cancel" states="draft,sent" string="Cancel Sale Order" groups="base.group_user"/>
				</xpath>
				<xpath expr="//field[@name='partner_shipping_id']"  position="replace">
					<field name="partner_shipping_id" required="0" invisible="1" />
				</xpath>
				<xpath expr="//field[@name='partner_invoice_id']"  position="replace">
					<field name="partner_invoice_id" required="0" invisible="1" />
				</xpath>
				<xpath expr="//field[@name='order_line']/tree"  position="attributes">
					<attribute name="create">false</attribute>
				</xpath>
				<xpath expr="//field[@name='date_order']"  position="before">
					<field name="order_type" />
				</xpath>
				<xpath expr="//field[@name='currency_id']"  position="replace">
					<field name="currency_id" invisible="0" readonly = "0" on_change="onchange_currency(currency_id)"
					attrs="{'readonly': [('state','in',('done','progress'))]}"
					required = "0" options="{'create': false, 'create_edit': false}" />
				</xpath>
				<xpath expr="//field[@name='payment_term']"  position="replace">
				</xpath>
			
				<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field/tree/field[@name='name']"  position="after">
					<field name="product_type" />
					<field name="application_id" options="{'create': false, 'create_edit': false}" />
				</xpath>
				
			    <xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field/tree/field[@name='product_id']"  position="replace">
					<field name="product_id" context="{'search_blanket_id':True,'blanket_id':parent.blanket_id, 'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'shop':parent.shop_id, 'uom':product_uom}"
                                                groups="base.group_user"
                                                on_change="product_id_change(parent.pricelist_id, product_id, product_uom_qty, False, product_uos_qty, False, name, parent.partner_id, False, True, parent.date_order, False, parent.fiscal_position, False, context)" options="{'create': false, 'create_edit': false}"/> 
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field/tree/field[@name='product_uom_qty']"  position="replace">
					<field name="product_uom_qty" context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'shop':parent.shop_id, 'uom':product_uom}"/> 
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field/tree/field[@name='product_uom']"  position="attributes">
					<attribute name="readonly">1</attribute>
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field/tree/field[@name='price_subtotal']"  position="before">
					<field name="amount_basic"/>
					<field name="amount_ed"/>			
				</xpath>
				<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field/tree/field[@name='price_subtotal']"  position="after">
					<field name="freight" />
					<field name="name_consignee_id" domain="[('consignee_parent_id','=',parent.partner_id)]" on_change = "onchange_consignee_id(name_consignee_id)" options="{'create': false, 'create_edit': false}"/>
					<field name="location" invisible='1'/>
					
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Order Lines']/field/tree/field[@name='tax_id']"  position="attributes">
					<attribute name='invisible'>1</attribute>
				</xpath>
				

				<xpath expr="//field[@name='partner_id']"  position="replace">
					<field name="partner_id" domain="[('customer','=',1),('is_company','=',1),('disapprove','=',1)]" options="{'create': false, 'create_edit': false}" on_change = "onchange_partner_id(partner_id,blanket_id)" context="{'search_default_customer':1, 'show_address': 1, 'search_partner_id':True, 'blanket_id':blanket_id}" />
				</xpath>
				
				<xpath expr="//label[@string='Quotation ']"  position="replace">
					<label string="Draft Sales Order " attrs="{'invisible': [('state','not in',('draft','sent'))]}"/>
				</xpath>
				
				<xpath expr="//button[@name='action_button_confirm']"  position="replace">
					<button name="action_button_confirm" states="draft" string="Confirm Sale" type="object" groups="green_erp_arulmani_sale.group_vvti_sale_manager"/>
					<button name="action_button_confirm" states="sent" string="Confirm Sale" class="oe_highlight" type="object" groups="green_erp_arulmani_sale.group_vvti_sale_manager"/>
					<button name='action_button_confirm_approve' string="Approve" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('invoiced','=',False),('flag_t','=',True),('flag_p','=',True)]}" groups="green_erp_arulmani_sale.group_vvti_sale_gm"/>
				</xpath>
				
				<xpath expr="//page[@string='Order Lines']"  position="after">
					<page string="Sales Logs">
						<field name="tpt_log_line" nolabel='1'>
							<tree editable='top'>
								<field name="name"/>
								<field name="current_date"/>
							</tree>
						</field>
					</page>
				</xpath>
				
	       	</field>
        </record>
        
        <record id="view_order_form_button" model="ir.ui.view">
            <field name="name">view.order.form.button</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_stock.view_order_form_inherit"/>
            <field name="arch" type="xml">
            	<data>
	            	<xpath expr="//button[@name='action_view_delivery']" position="replace">
			            <button name="action_view_delivery" string="Create/View Delivery Order" type="object" class="oe_highlight"
			                 attrs="{'invisible': ['|','|','|',('picking_ids','=',False),('picking_ids','=',[]), ('state', 'not in', ('progress','manual')),('shipped','=',True)]}" groups="base.group_user"/>
		            </xpath>
	            </data>
            </field>
        </record>
        
        
        
    <record id="view_tpt_blanket_order_tree_vew" model="ir.ui.view">
			<field name="name">tpt.blanket.order.tree</field>
			<field name="model">tpt.blanket.order</field>
			<field name="arch" type="xml">
				<tree string="Blanket Order">
						<field name="name" />
						<field name="customer_id" options="{'create': false, 'create_edit': false}"/>
						<field name="invoice_address" />
						<field name="document_type" />
						<field name="payment_term_id" options="{'create': false, 'create_edit': false}"/>						
						<field name="bo_date" />
						<field name="po_date" /> 						
						<field name="exp_delivery_date" />						
						<field name="quotaion_no" invisible='1'/>						
						<field name="sale_tax_id" options="{'create': false, 'create_edit': false}"/>
						<field name="order_type" />
						<field name="state" widget="statusbar" statusbar_visible="draft,cancel,done,approve" statusbar_colors='{"draft":"blue","cancel":"blue","done":"red"}'/>
				</tree>
			</field>
		</record>
		

		<record id="view_tpt_blanket_order_form_vew" model="ir.ui.view">
            <field name="name">tpt.blanket.order.form</field>
            <field name="model">tpt.blanket.order</field>
            <field name="arch" type="xml">
	            <form string="Blanket Order" version="7.0">
	            <header>
	            		<button name="bt_approve" states='draft' string="Confirm" type="object" class="oe_highlight" />
	                    <button name="bt_cancel" states='draft,approve' string="Cancel" type="object" class="oe_highlight" />
	                    <field name="state" widget="statusbar" statusbar_visible="draft,cancel,approve,done" statusbar_colors='{"draft":"blue","cancel":"blue","done":"red"}'/>
	            </header>    
	            	<sheet>
                    <h1>
                    	<label for ="name" />
                        <field name="name" nolabel="1" />
                    </h1>
                    <group>
                    	<group >
                    	<field name="customer_id" domain="[('customer','=',1),('is_company','=',1),('disapprove','=',1),('customer_account_group_id','=','VVTI Sold to Party')]" on_change = "onchange_customer_id(customer_id,blank_order_line)" options="{'create': false, 'create_edit': false}"/>                    	
                    	<label for="invoice_address" />
                    	<div>
                    		<field name="invoice_address" placeholder="Street..."/>
                    		<field name="street2"/>
                    		<field name="street3"/>
                    		<field name="city" placeholder="City"/>
                    		<field name="country_id" placeholder="Country" options="{'create': false, 'create_edit': false}"/>
                    		<field name="state_id" placeholder="State" domain="[('country_id','=', country_id)]" options="{'create': false, 'create_edit': false}"/>
                    		<field name="zip" placeholder="ZIP"/>
                    	</div>
                    	<field name="document_type" />
                    	<field name="payment_term_id" options="{'create': false, 'create_edit': false}"/>
                    	<field name="currency_id" options="{'create': false, 'create_edit': false}"/>
                    	<field name="incoterm_id" options="{'create': false, 'create_edit': false}"/>
                    	<field name="excise_duty_id" domain="[('type_tax_use','=','excise_duty')]" options="{'create': false, 'create_edit': false}"/>
                    	</group>
                      
						<group>
						<field name="bo_date" />
						<field name="po_date" />
						<field name="po_number" />
						<!-- <field name="exp_delivery_date" on_change = "onchange_exp_delivery_date(exp_delivery_date)"/>  -->
						<!--<field name="dispatch_date" on_change = "onchange_sche_dispatch_date(dispatch_date)"/>-->
						<field name="quotaion_no" invisible='1'/>
						<field name="channel" options="{'create': false, 'create_edit': false}"/>
						<field name="sale_tax_id" domain="[('type_tax_use','=','sale')]" options="{'create': false, 'create_edit': false}"/>
						<field name="order_type" />
						<field name="reason" />
						
						</group>
						
					</group>
						<notebook>
							<page string = "Order Lines">
								<field name="blank_order_line" nolabel='1'>
									<tree editable='top'>
									    <field name="product_id" on_change="onchange_product_id(product_id)" options="{'create': false, 'create_edit': false}" domain="[('cate_name','=','finish')]"/>															
										<field name="description" readonly='1'/>
										<field name="product_type" readonly='1'/>
										<field name="application_id" domain="[('product_id','=',product_id)]" attrs="{'required':[('is_fsh_tio2','=',True)]}" options="{'create': false, 'create_edit': false}"/>
										<field name="is_fsh_tio2" invisible='1'/> 
										<field name="product_uom_qty" />
										<field name="uom_po_id" options="{'create': false, 'create_edit': false}" readonly='1'/>
										<field name="price_unit" />
										<field name="amount_basic"/>
										<field name="amount_ed"/>
										<field name="sub_total"/> 
										
										<field name="tpt_name_consignee_id" domain="[('tpt_consignee_header_id','=',parent.customer_id)]"  options="{'create': false, 'create_edit': false}"/>
										 
										<field name="name_consignee_id" invisible='1' domain="[('consignee_parent_id','=',parent.customer_id)]" on_change = "onchange_consignee_id(name_consignee_id)" options="{'create': false, 'create_edit': false}"/>
										<field name="location" invisible='1'/>  
										<field name="freight" />
										<!-- 
										<field name="expected_date" />
										 -->
									</tree>
								</field>
								<group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                	<field name="amount_untaxed" widget="monetary" />
                                	<field name="amount_tax" widget="monetary" />     
                                		<div class="oe_subtotal_footer_separator oe_inline">
                                     		<label for="amount_total"/>  
                                     		
                                     		<!-- TPT -->
	                                    	<button name="button_dummy"
	                                        states="draft,sent" string="(update)" type="object" class="oe_edit_only oe_link"/>
	                               
                                     		
                                		</div>
                                 	<field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" />  
                            	</group>  
                            	<div class="oe_clear"/>  
							</page>
						</notebook>
						
		         	</sheet>
		         </form>
			</field>
		</record>
          
		<record id="action_tpt_blanket_order_form" model="ir.actions.act_window">
            <field name="name">Blanket Order</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tpt.blanket.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tpt_blanket_order_tree_vew"/>
        </record>
        
        <menuitem id="menu_hr_sale_management" parent="base.menu_base_partner" name="Sale Management" sequence="1"/>
        <menuitem action="action_tpt_blanket_order_form"
            id="menu_action_tpt_blanket_order_form"
            parent="menu_hr_sale_management" sequence="0"/>
            
        <record id="view_tpt_test_report_tree_vew" model="ir.ui.view">
			<field name="name">tpt.test.report.tree</field>
			<field name="model">tpt.test.report</field>
			<field name="arch" type="xml">
				<tree string="Test Report">
					<field name="name"/>
				</tree>
			</field>
		</record>

		<record id="view_tpt_test_report_form_vew" model="ir.ui.view">
            <field name="name">tpt.test.report.form</field>
            <field name="model">tpt.test.report</field>
            <field name="arch" type="xml">
	            <form string="Test Report" version="7.0">
	            	<header>
	            		<button name="test_report_print" class="oe_highlight" string="Pint" type="object"/>
	            	</header>
	            	<sheet>
		                <group> 
							<field name="name" on_change="onchange_product(name)" options="{'create': false, 'create_edit': false}" domain="['|',('name','in',['TITANIUM DIOXIDE-ANATASE','FERROUS SULPHATE','M0501010001','M0501010002']),('default_code','in',['FSH','TiO2','M0501010001','M0501010002'])]"/>
							<field name="is_tio2" invisible='1'/>
						</group>
						<group col='4' colspan='2' attrs="{'invisible':[('is_tio2','=',False)]}">
							<field name="date_of_manufacture"/>
							<field name="date_of_expiry"/>
						</group>
						<group string="Line">
							<field name="report_line" nolabel='1'>
								<tree editable='top'>
									<field name="name"/>
									<field name="value"/>
								</tree>
							</field>						
						</group>
				    </sheet>
		         </form>
			</field>
		</record>
          
		<record id="action_view_tpt_test_report_form" model="ir.actions.act_window">
            <field name="name">Test Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tpt.test.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tpt_test_report_tree_vew"/>
        </record>
        
        <menuitem action="action_view_tpt_test_report_form"
            id="menu_action_view_tpt_test_report_form"
            parent="menu_hr_sale_management" sequence="5"/>						

        <record id="view_tpt_batch_request_tree_vew" model="ir.ui.view">
			<field name="name">tpt.batch.request.tree</field>
			<field name="model">tpt.batch.request</field>
			<field name="arch" type="xml">
				<tree string="Batch Request">
						<field name="name"/>
						<field name="sale_order_id"/>
						<field name="customer_id"/>
						<field name="request_date"/>
						<field name="description"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,cancel,done" statusbar_colors='{"draft":"blue","cancel":"blue"}'/>
				</tree>
			</field>
		</record>
		
		<record id="view_tpt_batch_request_form_vew" model="ir.ui.view">
            <field name="name">tpt.batch.request.form</field>
            <field name="model">tpt.batch.request</field>
            <field name="arch" type="xml">
	            <form string="Batch Request" version="7.0">   
	            <header>
	            	<button name="bt_approve" states='draft' string="Approve" type="object" class="oe_highlight" groups="green_erp_arulmani_sale.group_vvti_sale_user"/>
                    <button name="bt_cancel" string="Cancel" states="draft,done" type="object" class="oe_highlight" groups="green_erp_arulmani_sale.group_vvti_sale_user"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,cancel,done" statusbar_colors='{"draft":"blue","cancel":"blue"}'/>
	            </header>
	            	<sheet>
		                <group>    
						<field name="name"/>
						<field name="sale_order_id" domain="[('document_type','in',['scrap','saleorder']),('state','in',['progress']),('order_line','!=',False),('state','!=','cancel')]" on_change = "onchange_sale_order_id(sale_order_id)" options="{'create': false, 'create_edit': false}"/>
						<!--<field name="sale_order_id" domain="[('document_type','in',['scrap','saleorder']),('state','in',['progress']),('order_line','!=',False),('state','!=','cancel'),('payment_term_id','not in',['Immediate Payment','Immediate'])]" on_change = "onchange_sale_order_id(sale_order_id)" options="{'create': false, 'create_edit': false}"/>-->
						<field name="customer_id" domain="[('customer','=',1),('is_company','=',1)]" options="{'create': false, 'create_edit': false}"/>
						<field name="request_date"/>
						<field name="description"/>
						</group>
						<notebook>
							<page string = "Product Information">
								<field name="product_information_line" nolabel='1'>
									<tree editable='top'>
										<field name="product_id" widget = "selection" on_change="onchange_product_id(product_id)" options="{'create': false, 'create_edit': false}"/>
										<field name="product_type" />
										<field name="application_id" options="{'create': false, 'create_edit': false}"/>
										<field name="product_uom_qty" />
										<field name="uom_po_id" edit='false' options="{'create': false, 'create_edit': false}"/>
									</tree>
								</field>
							</page>
						</notebook>
		         	</sheet>
		         </form>
			</field>
		</record>
          
		<record id="action_tpt_batch_request_form" model="ir.actions.act_window">
            <field name="name">Batch Request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tpt.batch.request</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tpt_batch_request_tree_vew"/>
        </record>
        
        <menuitem action="action_tpt_batch_request_form"
            id="menu_action_tpt_batch_request_form"
            parent="menu_hr_sale_management" sequence="2"/>
            
            
     <record id="view_tpt_form_403_tree_vew" model="ir.ui.view">
			<field name="name">tpt.form.403.tree</field>
			<field name="model">tpt.form.403</field>
			<field name="arch" type="xml">
				<tree string="Form 403">
						<field name="name"/>
						<field name="from_place"/>
						<field name="to_place"/>
						<field name="from_district"/>
						<field name="to_district"/>
						
				</tree>
			</field>
		</record> 
		
		<record id="view_tpt_form_403_form_vew" model="ir.ui.view">
            <field name="name">tpt.form.403.form</field>
            <field name="model">tpt.form.403</field>
            <field name="arch" type="xml">
	            <form string="Form 403" version="7.0" >   
	            	<sheet>
		                <group col="1">  
		                	<group col="4" colspan="2">
		                		<field name="from_place"/>
								<field name="from_district"/>
								<field name="to_place"/>
								<field name="to_district"/>
								<field name="name" required = "1" domain="[('state','!=','draft')]" options="{'create': false, 'create_edit': false}"/>
								<field name="date"/>
		                	</group>
		                	<group string="Consignor's Details">
		                		<group>
		                			<field name="consignor_name" />
		                		</group>
		                		
		                		<group >
			                    	<label for="consignor_street" string="Address"/>
			                    	<div>
			                    		<field name="consignor_street" placeholder="Street..."/>
			                    		<field name="consignor_street2"/>
			                    		<field name="consignor_city" placeholder="City"/>
			                    		<field name="consignor_country_id" placeholder="Country" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="consignor_state_id" placeholder="State" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="consignor_zip" placeholder="ZIP"/>
			                    	</div>
		                    	</group>
		                    	<group>
		                			<field name="consignor_tel" />
		                			<field name="consignor_certi_no" />
		                			<field name="consignor_cst_no" />
		                		</group>
		                		<group>
		                			<field name="consignor_fax" />
			                    	<field name="consignor_date_1" />
			                    	<field name="consignor_date_2" />
		                		</group>
		                	</group>
		                	<group string="Nature of Transaction">
		                		<group col="4" colspan="2">
		                			<field name="inter_state" />
		                			<field name="tranfer" />
		                			<field name="deport_tranfer" />
		                			<field name="consigment" />
		                			<field name="job_work" />
		                			<field name="any_other" />
		                		</group>
		                	</group>
		                	<group string="Transporter’s Details">
		                		<group>
		                			<field name="transporter_name" />
		                			<field name="transporter_owner" />
		                			<field name="transporter_vehicle_no" />
		                		</group>
		                		<group >
			                    	<label for="transporter_street" string="Address" />
			                    	<div>
			                    		<field name="transporter_street" placeholder="Street..."/>
			                    		<field name="transporter_street2"/>
			                    		<field name="transporter_city" placeholder="City"/>
			                    		<field name="transporter_country_id" placeholder="Country" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="transporter_state_id" placeholder="State" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="transporter_zip" placeholder="ZIP"/>
			                    	</div>
		                    	</group>
		                	</group>
		                	<group string="Driver's Details">
		                		<group>
		                			<field name="driver_name" />
		                			<field name="driver_licence" />
		                			<field name="driver_issuing" />
		                		</group>
		                		<group >
			                    	<label for="driver_street" string="Address" />
			                    	<div>
			                    		<field name="driver_street" placeholder="Street..."/>
			                    		<field name="driver_street2"/>
			                    		<field name="driver_city" placeholder="City"/>
			                    		<field name="driver_country_id" placeholder="Country" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="driver_state_id" placeholder="State" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="driver_zip" placeholder="ZIP"/>
			                    	</div>
		                    	</group>
		                	</group>
		                	<group string="In charge of Goods">
		                		<group >
		                			<field name="good_name" />
			                    	<label for="good_street" string="Address" />
			                    	<div>
			                    		<field name="good_street" placeholder="Street..."/>
			                    		<field name="good_street2"/>
			                    		<field name="good_city" placeholder="City"/>
			                    		<field name="good_country_id" placeholder="Country" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="good_state_id" placeholder="State" options="{'create': false, 'create_edit': false}"/>
			                    		<field name="good_zip" placeholder="ZIP"/>
			                    	</div>
		                    	</group>
		                    	<group>
		                			<field name="good_designation" />
		                		</group>
		                	</group>
		                	<group string="For Commercial tax Department/Check Post">
		                		<group >
		                			<field name="entry_no" />
		                			<field name="arrival" />
		                			<field name="reason" />
		                    	</group>
		                    	<group>
		                			<field name="departure" />
		                			<field name="result" />
		                		</group>
		                	</group>                
						</group>
						<notebook>
							<page string = "Consignee">
								<group col="4" colspan="2">
									<group >
				                    	<label for="consignee_street" string="Address" />
				                    	<div>
				                    		<field name="consignee_street" placeholder="Street..."/>
				                    		<field name="consignee_street2"/>
				                    		<field name="consignee_city" placeholder="City"/>
				                    		<field name="consignee_country_id" placeholder="Country" options="{'create': false, 'create_edit': false}"/>
				                    		<field name="consignee_state_id" placeholder="State" options="{'create': false, 'create_edit': false}"/>
				                    		<field name="consignee_zip" placeholder="ZIP"/>
				                    	</div>
				                    	<field name="consignee_value" />
			                    	</group>
			                    	<group>
			                			<field name="consignee_certi_no" />
			                			<field name="consignee_cst_no" />
			                		</group>
		                		</group>
								<field name="consignee_line" nolabel='1'>
									<tree editable='bottom'>
										<field name="number" />
										<field name="description" />
										<field name="commodity" />
										<field name="unity_code" />
										<field name="rate_of_tax" />
										<field name="value" />
									</tree>
								</field>
							</page>
						</notebook>
		         	</sheet>
		         </form>
			</field>
		</record>
          
		<record id="action_view_tpt_form_403_form" model="ir.actions.act_window">
            <field name="name">Form 403</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tpt.form.403</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tpt_form_403_tree_vew"/>
        </record>
        
        <menuitem action="action_view_tpt_form_403_form"
            id="menu_action_view_tpt_form_403_form"
            parent="menu_hr_sale_management" sequence="13"/>

            
        <record id="tpt_view_res_partner_form" model="ir.ui.view">
            <field name="name">tpt.res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>	
            <field name="arch" type="xml">
                <xpath expr="//page[@string='Contacts']" position="before" >
                <!-- TPT START -->
                <!-- Effective Consignee -->
					<page string = "Consignee">
						<field name="tpt_consignee_line" nolabel='1'>
							<tree editable='top'>		    
								<field name="tpt_consignee_id" on_change = "onchange_tpt_consignee_id(tpt_consignee_id)" domain="[('customer_account_group_id','=','VVTI Ship to Party')]" options="{'create': false, 'create_edit': false}"/>
								<field name="tpt_consignee_code" invisible='0' readonly='1'/>			
								</tree>
							</field>							
					</page>
					 
				<!-- TPT END -->
                	<page string = "Consignee" invisible='1'>               	
						<field name="consignee_line" mode="kanban">
							<kanban>
                                <field name="color"/>
                                <field name="name"/>
                                <field name="title"/>
                                <field name="email"/>                              
                                <field name="parent_id"/>
                                <field name="is_company"/>
                                <field name="function"/>
                                <field name="phone"/>
                                <field name="street"/>
                                <field name="street2"/>
                                <field name="zip"/>
                                <field name="city"/>
                                <field name="country_id"/>
                                <field name="mobile"/>
                                <field name="fax"/>
                                <field name="state_id"/>
                                <field name="has_image"/>
                                
                                <templates>
                                    <t t-name="kanban-box">
                                        <t t-set="color" t-value="kanban_color(record.color.raw_value)"/>
                                        <div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '')" style="position: relative">
                                            <a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
                                            <div class="oe_module_vignette">
                                            <a type="open">
                                                <t t-if="record.has_image.raw_value === true">
                                                    <img t-att-src="kanban_image('res.partner', 'image', record.id.value, {'preview_image': 'image_small'})" class="oe_avatar oe_kanban_avatar_smallbox"/>
                                                </t>
                                                <t t-if="record.image and record.image.raw_value !== false">
                                                    <img t-att-src="'data:image/png;base64,'+record.image.raw_value" class="oe_avatar oe_kanban_avatar_smallbox"/>
                                                </t>
                                                <t t-if="record.has_image.raw_value === false and (!record.image or record.image.raw_value === false)">
                                                    <t t-if="record.is_company.raw_value === true">
                                                        <img t-att-src='_s + "/base/static/src/img/company_image.png"' class="oe_kanban_image oe_kanban_avatar_smallbox"/>
                                                    </t>
                                                    <t t-if="record.is_company.raw_value === false">
                                                        <img t-att-src='_s + "/base/static/src/img/avatar.png"' class="oe_kanban_image oe_kanban_avatar_smallbox"/>
                                                    </t>
                                                </t>
                                            </a>
                                                <div class="oe_module_desc">
                                                    <div class="oe_kanban_box_content oe_kanban_color_bglight oe_kanban_color_border">
                                                        <table class="oe_kanban_table">
                                                            <tr>
                                                                <td class="oe_kanban_title1" align="left" valign="middle">
                                                                    <h4><a type="open"><field name="name"/></a></h4>
                                                                    <i><div t-if="record.function.raw_value">
                                                                        <field name="function"/></div></i>
                                                                    <div><a t-if="record.email.raw_value" title="Mail" t-att-href="'mailto:'+record.email.value">
                                                                        <field name="email"/>
                                                                    </a></div>
                                                                    <div t-if="record.phone.raw_value">Phone: <field name="phone"/></div>
                                                                    <div t-if="record.mobile.raw_value">Mobile: <field name="mobile"/></div>
                                                                    <div t-if="record.fax.raw_value">Fax: <field name="fax"/></div>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                            <form string="Contact" version="7.0">
                                <sheet>
                                    <field name="image" widget='image' class="oe_avatar oe_left" options='{"preview_image": "image_medium"}'/>
                                    <div class="oe_title">
                                        <label for="name" class="oe_edit_only"/>
                                        <!-- <h1><field name="name" style="width: 70%%"/></h1>  -->
                                        <h1><field name="consignee_shift_party" on_change="onchange_consignee_shift_party(consignee_shift_party)" options="{'create': false, 'create_edit': false}" domain="[('customer_account_group_id','=','VVTI Ship to Party')]" style="width: 70%%"/></h1>
                                    </div>
                                    <group>
                                    	<group>
		                                    <label for="street" string="Address"/>
		                                        <div>
		                                        	<field name="name"/>
		                                            <field name="street" placeholder="Street..."/>
		                                            <field name="street2"/>
		                                            <field name="street3"/>
		                                            <div class="address_format">
		                                                <field name="city" placeholder="City" style="width: 40%%"/>
		                                                <field name="state_id" class="oe_no_button" placeholder="State" style="width: 37%%" options='{"no_open": True}' on_change="onchange_state(state_id)"/>
		                                                
		                                            </div>
		                                            
		                                            <field name="country_id" placeholder="Country" class="oe_no_button" options='{"no_open": True}'/>
		                                            <field name="zip" placeholder="ZIP" style="width: 20%%"/>
		                                        </div>
                                        		<!-- <field name="bill_location"/>  -->
                                    	</group>
                                    	<group>
                                        <field name="phone"/>
                                        <field name="mobile"/>
                                        <field name="email"/>
                                        <field name="fax"/>
                                        <!-- <field name="shipping_location"/>  -->
                                   		</group>
                                   	</group>
                                </sheet>
                            </form>
						</field>
					</page>
	        	</xpath>
        		
        		<xpath expr="//field[@name='credit']" position="attributes">
        			<attribute name='string'>Credit Used</attribute>
        		</xpath>
        		
        		
        		<!--<xpath expr="//field[@name='is_company']" position="after">
        			<field name="disapprove" readonly="1"/>
        		</xpath>-->
        		
        		<xpath expr="//sheet" position="before">
        			<header>
		        		<button name="approve_customer" string="Approve" type="object" class="oe_highlight" attrs="{'invisible':[('disapprove','=',True)]}" groups="green_erp_arulmani_sale.group_vvti_sale_manager"/>
		        	</header>
			    </xpath>
            </field>
        </record> 
        
        <record id="tpt_view_batch_allotment_form" model="ir.ui.view">
            <field name="model">tpt.batch.allotment</field>
            <field name="arch" type="xml">
                <form string="Batch Allotment" version="7.0">
                   <header>
                     <button string="Approve" name="confirm" states="to_approve,refuse" type="object" class="oe_highlight" groups="green_erp_arulmani_sale.group_vvti_sale_manager,green_erp_arulmani_crm.group_qc_user"/>
                     <button string="Refuse" name="refuse" states="to_approve,confirm" type="object" class="oe_highlight" groups="green_erp_arulmani_sale.group_vvti_sale_manager,green_erp_arulmani_crm.group_qc_user"/>
                     <button string="Cancel" name="cancelled" states="to_approve,confirm,refuse" type="object" class="oe_highlight" groups="green_erp_arulmani_sale.group_vvti_sale_manager,green_erp_arulmani_crm.group_qc_manager"/>
                     <field name="state" widget="statusbar" statusbar_colors='{"confirm":"blue","to_approve":"blue","refuse":"red"}'/>
                    </header>
                   <sheet>
                   		<group>
                        	<field name="batch_request_id" context="{'search_default_batch_request_by_allot':1}" options="{'create': false, 'create_edit': false}" on_change="onchange_batch_request_id(batch_request_id)" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
                    		<field name="name" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
                    		<field name="sale_order_id" domain="[('state','=','progress')]" options="{'create': false, 'create_edit': false}" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
                    		<field name="customer_id" domain="[('customer','=',1),('is_company','=',1)]" options="{'create': false, 'create_edit': false}" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
                    		<field name="description" attrs="{'readonly':[('state','in',('cancel','confirm'))]}"/>
                    		<field name="requested_qty"/>
	                    </group>
	                    <notebook>
		                    <page string="Product Information" autofocus="autofocus">
	                            <field name="batch_allotment_line" nolabel='1' attrs="{'readonly':[('state','in',('cancel','confirm'))]}">
	                            	<tree editable='bottom'>
	                            		<field name="product_id" on_change="onchange_product_id(product_id,parent.batch_request_id)" domain="[('track_production','=','True'),('track_incoming','=','True'),('track_outgoing','=','True')]" context="{'search_batch_request':True,'batch_request_id':parent.batch_request_id}" options="{'create': false, 'create_edit': false}"/>
										<field name="product_type" />
										<field name="application_id" options="{'create': false, 'create_edit': false}"/>
										<field name="product_uom_qty"/>
										<field name="uom_po_id" edit='false' options="{'create': false, 'create_edit': false}"/>
										<field name="sys_batch" domain="[('product_id','=',product_id),('application_id','=',application_id),('stock_available','>',0.0)]" options="{'create': false, 'create_edit': false}" on_change="onchange_sys_batch(sys_batch,product_uom_qty,parent.batch_allotment_line)"/>
										<field name="phy_batch"/>
	                                </tree>
	                            </field>
	                        </page>
                       </notebook>
                  </sheet>
                </form>
            </field>
        </record>
        <record id="tpt_view_batch_allotment_tree" model="ir.ui.view">
            <field name="model">tpt.batch.allotment</field>
            <field name="arch" type="xml">
                <tree string="Batch Allotment">
                    <field name="batch_request_id"/>
                    <field name="sale_order_id"/>
                    <field name="name"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record id="tpt_action_batch_allotment" model="ir.actions.act_window">
            <field name="name">Batch Allotment</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tpt.batch.allotment</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="tpt_view_batch_allotment_tree"/>
        </record>
        <menuitem action="tpt_action_batch_allotment" id="tpt_menu_batch_allotment" parent="menu_hr_sale_management" sequence="10"/>
        
        <record id="view_tpt_pgi_form" model="ir.ui.view">
            <field name="model">tpt.pgi</field>
            <field name="arch" type="xml">
                <form string="Post Goods Issue" version="7.0">
                   <sheet>
                   		<group>
                   			<field name="name"/>
                        	<field name="do_id" on_change="onchange_do_id(do_id)" domain="[('type','=','out')]" options="{'create': false, 'create_edit': false}"/>
                    		<field name="customer_id" domain="[('customer','=',1),('is_company','=',1)]" options="{'create': false, 'create_edit': false}"/>
                    		<field name="date"/>
                    		<field name="warehouse" options="{'create': false, 'create_edit': false}"/>
	                    </group>
	                    <notebook>
		                    <page string="Product" autofocus="autofocus">
	                            <field name="batch_allotment_line" nolabel='1' >
	                            	<tree editable='top'>
	                            		<field name="product_id" widget = "selection" options="{'create': false, 'create_edit': false}"/>
										<field name="product_type"/>
										<field name="application_id" options="{'create': false, 'create_edit': false}"/>
										<field name="product_uom_qty"/>
										<field name="uom_po_id" edit='false' options="{'create': false, 'create_edit': false}"/>
										<field name="sys_batch" options="{'create': false, 'create_edit': false}" on_change="onchange_sys_batch(sys_batch)"/>
										<field name="phy_batch"/>
	                                </tree>
	                            </field>
	                        </page>
                       </notebook>
                  </sheet>
                </form>
            </field>
        </record>
        <record id="view_tpt_pgi_tree" model="ir.ui.view">
            <field name="model">tpt.pgi</field>
            <field name="arch" type="xml">
                <tree string="Post Goods Issue">
                    <field name="name"/>
            		<field name="customer_id"/>
            		<field name="date"/>
            		<field name="warehouse"/>
                </tree>
            </field>
        </record>
        <record id="action_tpt_pgi" model="ir.actions.act_window">
            <field name="name">Post Goods Issue</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tpt.pgi</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tpt_pgi_tree"/>
        </record>
        <menuitem action="action_tpt_pgi" id="menu_tpt_pgi" parent="menu_hr_sale_management" sequence="13"/>
        
        <record id="stock_production_lot_form" model="ir.ui.view">
            <field name="name">stock.production.lot.form</field>
            <field name="model">stock.production.lot</field>
            <field name="inherit_id" ref="stock.view_production_lot_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='product_id']"  position="after" >
                	<field name="phy_batch_no"/>
                </xpath>
            </field>
        </record> 
        
        <record id="view_tpt_schedule_dispatch_update_tree_vew" model="ir.ui.view">
			<field name="name">tpt.schedule.dispatch.update.tree</field>
			<field name="model">tpt.schedule.dispatch.update</field>
			<field name="arch" type="xml">
				<tree string="Schedule Dispatch Date Update">
						<field name="name"/>
						<field name="bo_line_id"/>
						<field name="schedule_date"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,done" statusbar_colors='{"draft":"blue"}'/>
				</tree>
			</field>
		</record>
		
		<record id="view_tpt_schedule_dispatch_update_form_vew" model="ir.ui.view">
            <field name="name">tpt.schedule.dispatch.update.form</field>
            <field name="model">tpt.schedule.dispatch.update</field>
            <field name="arch" type="xml">
	            <form string="Schedule Dispatch Date Update" version="7.0">   
	            <header>
	            	<button name="bt_approve" states='draft' string="Submit" type="object" class="oe_highlight" groups="green_erp_arulmani_sale.group_vvti_sale_user"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,done" statusbar_colors='{"draft":"blue"}'/>
	            </header>
	            	<sheet>
		                <group>    
							<field name="name" domain="[('blank_order_line','!=',False), ('state','=','approve')]" required = "1" options="{'create': false, 'create_edit': false}"/>
							<field name="bo_line_id" required = "1" domain="[('blanket_order_id','=',name)]" context="{'search_blanket_line':1,'blanket_id':name}" options="{'create': false, 'create_edit': false}"/>
							<field name="schedule_date"/>
						</group>
		         	</sheet>
		         </form>
			</field>
		</record>
          
		<record id="action_tpt_schedule_dispatch_update_form" model="ir.actions.act_window">
            <field name="name">Schedule Dispatch Date Update</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tpt.schedule.dispatch.update</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tpt_schedule_dispatch_update_tree_vew"/>
        </record>
        
        <menuitem action="action_tpt_schedule_dispatch_update_form"
            id="menu_action_tpt_schedule_dispatch_update_form"
            parent="menu_hr_sale_management" sequence="50"/>
 
    </data>
</openerp>
