<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
     	<record id="tpt_stock_picking_out_tree" model="ir.ui.view">
            <field name="name">tpt.stock.picking.out.tree</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_out_tree"/>
            <field name="arch" type="xml">
	            <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Delivery Orders" position="replace">
	                <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Delivery Orders">
	                    <field name="name"/>
	                    <field name="partner_id" string="Customer"/>
	                    <field name="origin" invisible="1"/>
	                    <field name="min_date" invisible="1"/>
	                    <field name="sale_id"/>
	                    <field name="date"/>
	        			<field name="cons_loca"/>
		        		<field name="warehouse"/>
		        		<field name="transporter"/>
		        		<field name="truck"/>
		        		<field name="remarks"/>
		        		<field name="doc_status"/>
	                    <field name="backorder_id" invisible="1"/>
	                    <field name="stock_journal_id" invisible="1" groups="account.group_account_user"/>
	                    <field name="invoice_state" invisible="1"/>
	                    <field name="state" invisible="1"/>
	                </tree>
                </tree>
            </field>
        </record>
        
       <record id="tpt_stock_move_picking_form" model="ir.ui.view">
            <field name="name">tpt.stock.move.picking.form</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_picking_form"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='product_id']" position="replace">
					<field name="product_id"  context="{'search_do_ref_id':True,'do_ref_id':parent.do_ref_id}" on_change="onchange_product_id(product_id,location_id,location_dest_id, parent.partner_id)"/>
				</xpath>
            	<xpath expr="//field[@name='name']" position="replace">
					<field name="name" required = '0' invisible = '1'/>
				</xpath> 
            	<xpath expr="//field[@name='date']" position="replace">
					<field name="date" required = '0' invisible = '1' />
				</xpath> 
				<xpath expr="//button[@name='%(stock.track_line)d']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='date_expected']" position="replace">
					<field name="date_expected" required = '0' invisible = '1' />
				</xpath> 
				<xpath expr="//field[@name='partner_id']" position="replace">
					<field name="partner_id" invisible = '1' />
				</xpath> 
            	<xpath expr="//label[@for='tracking_id']" position="replace">
					<label for="tracking_id" invisible = '1'/>
				</xpath> 
            	<xpath expr="//field[@name='tracking_id']" position="replace">
					<field name="tracking_id" invisible = '1' groups="stock.group_tracking_lot" class="oe_inline"/>
				</xpath> 
				<xpath expr="//group[@string='Traceability']/div" position="replace">
					<div invisible = '1'>
					</div>
				</xpath> 

				<xpath expr="//group[@string='Locations']" position="replace">
					<group string="Locations" invisible = '1' groups="stock.group_locations">
                                <field name="location_id" required = '0' domain="[('usage','&lt;&gt;','view')]"/>
                                <field name="location_dest_id" required = '0' domain="[('usage','in', ['internal', 'supplier', 'customer'])]"/>
                    </group>
				</xpath>
			</field>
		</record>
		
		<record id="tpt_stock_move_picking_tree" model="ir.ui.view">
            <field name="name">tpt.stock.move.picking.tree</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_picking_tree"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='location_dest_id']" position="replace">
					<field name="location_dest_id" invisible = '1' groups="stock.group_locations"/>
				</xpath> 
				<xpath expr="//field[@name='tracking_id']" position="replace">
					<field name="tracking_id" invisible = '1' />
				</xpath> 
				<xpath expr="//field[@name='state']" position="replace">
					<field name="state" invisible = '1' groups="stock.group_locations"/>
				</xpath>
			</field>
		</record>
       
       <record id="tpt_stock_move_form" model="ir.ui.view">
            <field name="name">tpt.stock.move.form</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
            	<xpath expr="//sheet/h1" position="replace">
				</xpath>  
				<xpath expr="//form/sheet/group/group/field[@name='partner_id']" position="before">
					<field name="name" string = "Movement ID" required = "1" readonly = '1'/>
				</xpath> 
				<xpath expr="//form/sheet/group/group/field[@name='partner_id']" position="replace">
					<field name="partner_id" on_change="onchange_partner_in(partner_id)" invisible = "1"/>
					<field name="type" required = '1' string = "Movement Type"/>
				</xpath> 
				<xpath expr="//form/sheet/group/group/field[@name='stock_journal_id']" position="replace">
					<field name="stock_journal_id" widget="selection" groups="account.group_account_user" invisible = "1"/>
					<field name="location_id" domain="[('usage','in', ['internal'])]" on_change="onchange_location(location_id)" required = '1' string = "Source Location" options="{'create': false, 'create_edit': false}"/>
					<field name="reason"/>
				</xpath> 
				<xpath expr="//field[@name='date']" position="replace">
					<field name="date" invisible = "1"/>
					<field name="do_ref_id" on_change = "onchange_do_ref_id(do_ref_id)" options="{'create': false, 'create_edit': false}"/>
				</xpath> 
				<xpath expr="//field[@name='origin']" position="replace">
					<field name="origin" placeholder="e.g. PO0032" class="oe_inline" invisible = "1"/>
					<field name="move_date" required = '1' on_change="onchange_move_date(move_date)"/>
					<field name="location_dest_id" required = '1' domain="[('id','!=',location_id), ('usage','in', ['internal'])]" string = "Destination Location" options="{'create': false, 'create_edit': false}"/>
				</xpath> 
				
				<xpath expr="//page[@string='Products']" position="replace">
					<page string="Stock Move Details">
						<field name="move_lines" string="Stock Move" context="{'default_location_id':location_id,'default_location_dest_id':location_dest_id,'address_in_id': partner_id, 'form_view_ref':'stock.view_move_picking_form', 'tree_view_ref':'stock.view_move_picking_tree', 'picking_type': 'internal'}" options='{"reload_on_button": true}'/>
                        <field name="note" placeholder="Add an internal note..." class="oe_inline" invisible = "1"/>
					</page>
				</xpath> 
				
				<xpath expr="//page[@string='Additional Info']" position="replace">
					<page string="Additional Info" invisible = "1">
					<group>
                                <group>
                                    <field name="move_type"/>
                                    <field name="type" invisible="1"/>
                                    <field name="auto_picking" groups="base.group_user"/>
                                </group>
                                <group>
                                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                                    <field name="date_done" groups="base.group_no_one"/>
                                </group>
                            </group>
					</page>
				</xpath> 
				
			</field>
		</record>
		
		<menuitem name="Stock Move" action="stock.action_picking_tree6" id="stock.menu_action_picking_tree6" parent="stock.menu_stock_warehouse_mgmt" sequence="2" groups="stock.group_locations"/>
		
       <record id="tpt_invoice_tree" model="ir.ui.view">
            <field name="name">tpt.invoice.tree</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_tree"/>
            <field name="arch" type="xml">
            	<tree colors="blue:state == 'draft';black:state in ('proforma','proforma2','open');gray:state == 'cancel'" string="Invoice" position="replace">
	                <tree colors="blue:state == 'draft';black:state in ('proforma','proforma2','open');gray:state == 'cancel'" string="Invoice">
	                    <field name="partner_id" groups="base.group_user"/>
	                    <field name="date_invoice"/>
	                    <field name="number" invisible="1"/>
	                    <field name="reference" invisible="1"/>
	                    <field name="name" invisible="1"/>
	                    <field name="journal_id" invisible="1"/>
	                    <field name="period_id" invisible="1" groups="account.group_account_user"/>
	                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
	                    <field name="user_id" invisible="1"/>
	                    <field name="date_due" invisible="1"/>
	                    <field name="origin" invisible="1"/>
	                    <field name="currency_id" invisible="1" groups="base.group_multi_currency"/>
	                    <field name="residual" invisible="1" sum="Residual Amount"/>
	                    <field name="amount_untaxed" sum="Untaxed Amount"/>
	                    <field name="amount_total" sum="Total Amount"/>
	                    <field name="state" invisible="1"/>
	                </tree>
	           	</tree>
            </field>
        </record>
       
       <record id="tpt_customer_invoice_form" model="ir.ui.view">
            <field name="name">tpt.customer.invoice.form</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="arch" type="xml">
            	<xpath expr="//button[@name='invoice_print']" position="replace">
            		<button name='invoice_print' string="Print Invoice" type="object"/>
            	</xpath>
            	<xpath expr="//page[@string='Other Info']/group[@col='4']/group/field[@name='name']" position="replace">
				</xpath>  
				<xpath expr="//field[@name='partner_id']" position="replace">
					<field name="name" string = "Invoice" required = '0' invisible = '1'/>
					<field name="delivery_order_id" options="{'create': false, 'create_edit': false}" domain="[('state','=','done')]" on_change = "onchange_delivery_order_id(delivery_order_id)"/>
					<field string="Customer" name="partner_id"
                                on_change="onchange_partner_id(type,partner_id,date_invoice,payment_term, partner_bank_id,company_id)"
                                groups="base.group_user" context="{'search_default_customer':1, 'show_address': 1}"
                                domain="[('customer','=',1),('is_company','=',1)]"
                                options="{'create': false, 'create_edit': false,'always_reload': True}"/>
				</xpath>  
				<xpath expr="//field[@name='number']" position="replace">
					<field name="vvt_number" readonly="1" class="oe_inline"/>
				</xpath>
				<xpath expr="//field[@name='fiscal_position']" position="replace">
					<field name="type" string = "Document Type" readonly = "0"/>
					<field name="currency_id" options="{'create': false, 'create_edit': false}"/>
					<field name="excise_duty_id" options="{'create': false, 'create_edit': false}" domain="[('type_tax_use','=','excise_duty')]"/>
					<field name="doc_status" />
					<field name="pre_carriage_by" />
					<field name="port_of_loading_id" options="{'create': false, 'create_edit': false}"/>
					<field name="mark_container_no" />
					<field name="insurance" />
				</xpath>
				<xpath expr="//field[@name='journal_id']" position="replace">
					<field name="cons_loca" domain="[('consignee_parent_id','=',partner_id)]" options="{'create': false, 'create_edit': false,'always_reload': True}" context="{'show_address': 1}"/>
				</xpath>
				<xpath expr="//field[@name='date_invoice']" position="attributes">
					<attribute name="on_change">onchange_date_invoice(date_invoice)</attribute>
				</xpath>
				<xpath expr="//field[@name='account_id']" position="replace">
					<field name="account_id" required = "0" invisible = "1"/>
					<field name="sale_id" options="{'create': false, 'create_edit': false}"/>
					<field name="payment_term" options="{'create': false, 'create_edit': false}"/>
					<field name="sale_tax_id" domain="[('type_tax_use','=','sale')]" options="{'create': false, 'create_edit': false}"/>
					<field name="invoice_type" />
					<field name="vessel_flight_no" />
					<field name="port_of_discharge_id" options="{'create': false, 'create_edit': false}"/>
				</xpath>
				
				<xpath expr="//page[@string='Invoice Lines']/group/field[@name='payment_term']" position="replace">
				</xpath> 
				
				<xpath expr="//form/sheet/notebook/page[@string='Invoice Lines']/field/tree/field[@name='product_id']"  position="replace">
					<field name="product_id" required = "1" options="{'create': false, 'create_edit': false}"/>
				</xpath>
				
				<xpath expr="//page[@string='Invoice Lines']/group/field[@name='residual']" position="replace">
				</xpath> 
				
				<xpath expr="//page[@string='Invoice Lines']/div/label[@for='comment']" position="replace">
				</xpath>
				
				<xpath expr="//page[@string='Invoice Lines']/field[@name='comment']" position="replace">
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Invoice Lines']/field/tree/field[@name='name']"  position="after">
					<field name="product_type" />
					<field name="application_id" options="{'create': false, 'create_edit': false}"/>
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Invoice Lines']/field/tree/field[@name='account_id']"  position="replace">
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Invoice Lines']/field/tree/field[@name='invoice_line_tax_id']"  position="replace">
				</xpath>
				
				<xpath expr="//form/sheet/notebook/page[@string='Invoice Lines']/field/tree/field[@name='price_subtotal']"  position="replace">
					<field name="price_subtotal" string ="SubTotal"/>
					<field name="freight" />
				</xpath>
            </field>
        </record>    
            	
     	<record id="tpt_stock_picking_out_form" model="ir.ui.view">
            <field name="name">tpt.stock.picking.out.form</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_out_form"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='stock_journal_id']"  position="replace">
            		<field name="stock_journal_id" invisible="1"/>
            	</xpath>
            	<xpath expr="//field[@name='origin']"  position="replace">
            		<field name="origin" invisible="1"/>
            	</xpath>
            	<xpath expr="//field[@name='min_date']"  position="replace">
            		<field name="min_date" invisible="1"/>
            	</xpath>
            	<xpath expr="//field[@name='date']" position="attributes">
					<attribute name='required'>1</attribute>
				</xpath>
				<xpath expr="//field[@name='backorder_id']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
            	<xpath expr="//field[@name='partner_id']"  position="replace">
                    <field name="partner_id" on_change="onchange_partner_in(partner_id)" string="Customer" domain="[('customer','=',1),('is_company','=',1)]" readonly = "1" options="{'create': false, 'create_edit': false}"/>
            		<field name="sale_id" required = '1' domain="[('state','=','progress')]" options="{'create': false, 'create_edit': false}"/>
            		<field name="cons_loca" required = "1" domain="[('consignee_parent_id','=',partner_id)]" options="{'create': false, 'create_edit': false,'always_reload': True}" context="{'show_address': 1}"/>
            		<field name="warehouse" required = "1" domain="[('usage','=','internal')]" options="{'create': false, 'create_edit': false}"/>
            		<field name="transporter" required = "1"/>
            		<field name="truck" required = "1"/>
            		<field name="remarks"/>
            		<field name="doc_status"/>
            	</xpath>
            	<xpath expr="//field[@name='move_lines']"  position="replace">
            		<field name="move_lines" string="Stock Move" context="{'address_out_id': partner_id, 'picking_type': 'out', 'form_view_ref':'stock.view_move_picking_form', 'tree_view_ref':'stock.view_move_picking_tree'}" options='{"reload_on_button": true}'>
            			<tree editable='top' colors="grey:state == 'cancel';red:(state not in ('cancel','done')) and date > current_date" string="Moves">
		                    <field name="name" invisible="1"/>
		                    <field name="picking_id" string="Reference" invisible="1"/>
		                    <field name="origin" invisible="1"/>
		                    <field name="type" invisible="1" on_change="onchange_move_type(type)"/>
		                    <field name="create_date" invisible="1" groups="base.group_no_one"/>
		                    <field name="product_id" on_change="onchange_product_id(product_id,location_id,location_dest_id, False)" options="{'create': false, 'create_edit': false}"/>
		                    <field name="product_type"/>
            				<field name="application_id" options="{'create': false, 'create_edit': false}"/>
		                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
		                    <field name="product_uom" string="Unit of Measure" groups="product.group_uom" options="{'create': false, 'create_edit': false}"/>
		                    <field name="product_uos" invisible="1" groups="product.group_uos"/>
		                    <button name="%(stock.move_scrap)d"
		                        string="Scrap Products" type="action"
		                        icon="terp-gtk-jump-to-ltr" context="{'scrap': True}"
		                        states="draft,waiting,confirmed,assigned" invisible="1"/>
		                    <field name="prodlot_id" groups="stock.group_production_lot" context="{'search_prodlot_by_batch_alot':1,'sale_id':parent.sale_id}" options="{'create': false, 'create_edit': false}"/>
		                    <field name="phy_batch"/>
		                    <button name="%(stock.track_line)d" string="Split in Serial Numbers" type="action"
		                        icon="gtk-justify-fill" attrs="{'invisible': [('prodlot_id','&lt;&gt;',False)]}"
		                        states="draft,waiting,confirmed,assigned,done"
		                        invisible="1"
		                        groups="stock.group_tracking_lot"/>
		                    <field name="tracking_id" invisible="1" groups="stock.group_tracking_lot"/>
		                    <button name="setlast_tracking" string="Put in current pack" type="object"
		                        groups="product.group_stock_packaging"
		                        icon="terp-accessories-archiver" attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
		                        states="draft,assigned,confirmed,done" invisible="1"/>
		                    <button name="%(stock.split_into)d" string="Put in a new pack" type="action"
		                        groups="product.group_stock_packaging"
		                        icon="terp-accessories-archiver+"
		                        states="draft,assigned,confirmed,done" invisible="1"/>
		                    <field name="location_id" invisible="1" groups="stock.group_locations"/>
		                    <field name="location_dest_id" invisible="1" groups="stock.group_locations"/>
		                    <field name="date" invisible="1" groups="base.group_no_one"/>
		                    <field name="date_expected" invisible="1"/>
		                    <field name="state" invisible="1"/>
		                    <button name="action_done" states="confirmed,assigned" string="Process" type="object" icon="gtk-go-forward" help="Done" invisible="1"/>
		                </tree>
            		</field>
            	</xpath>
            	
            	<xpath expr="/form/header//button[@name='%(stock.report_picking_list_out)d']" position="replace">
            		 <button name="print_dispatch_slip" string="Print Dispatch Slip" type="object" states="done" class="oe_highlight"/>
            		 <button name="print_packing_list" string="Print Packing List" type="object" class="oe_highlight"/>
            	</xpath>
            	
            </field>
        </record>
    </data>
</openerp>
